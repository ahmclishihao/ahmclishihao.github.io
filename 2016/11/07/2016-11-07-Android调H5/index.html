<!DOCTYPE html><html lang="zh_CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> Android调H5 · 潜水的沙 -- Java 开发者</title><meta name="description" content="Android调H5 - 潜水的沙"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.ico"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://lshao.xyz/atom.xml" title="潜水的沙 -- Java 开发者"></head><body><div class="wrap"><header><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">潜水的沙</a></li><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="https://github.com/ahmclishihao" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="http://blog.csdn.net/ahmclishihao" target="_blank" class="nav-list-link">CSDN</a></li><li class="nav-list-item"><a href="/about/" target="_self" class="nav-list-link">ABOUT</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">Android调H5</h1><div class="post-info">2016年11月7日</div><div class="post-content"><p>如何使用Android中的WebView与JavaScript交互？</p>
<a id="more"></a>
<h1 id="Android调H5"><a href="#Android调H5" class="headerlink" title="Android调H5"></a>Android调H5</h1><p>1.WebView</p>
<blockquote>
<p>可以加载链接，也可以加载本地网页<br>加载assets文件夹中的网页：loadUrl(“file:///android_asset/name”)</p>
</blockquote>
<p>2.java调js</p>
<blockquote>
<p>注意参数加‘’<br>“javascript:jsName(‘“+params+”‘)”–&gt;这是js的一种写法<br>webView.loadUrl(“javascript:jsName(‘“+params+”‘)”);</p>
</blockquote>
<p>3.js调java</p>
<blockquote>
<p>1.android<br>声明js对应接口，webWiew.addJavascriptInterface(new Class(), “字段名”)<br>字段对应的android类中方法名需要添加注解@JavascriptInterface<br>2.js<br>window.字段名.方法名</p>
</blockquote>
<h1 id="ScrollView结合ListView使用"><a href="#ScrollView结合ListView使用" class="headerlink" title="ScrollView结合ListView使用"></a>ScrollView结合ListView使用</h1><p>结合使用会造成listview只显示一行，因为listview需要重新测量高度，两种方法进行测量。</p>
<p>1、重新测量每一项高度+divider的总高度最后得到精确值，<br>2、重写onMeasure方法，直接设置高度测量规则为，<br>    MeasureSpec.makeMeasureSpec(Integer.MAX_VALUE&gt;&gt;2,AT_MOST);<br>即给一个非常大的值让其自己适配</p>
</div></article></div></main><footer><div class="paginator"><a href="/2016/11/13/2016-11-13-SurfaceView的使用/" class="prev">PREV</a><a href="/2016/10/28/2016-10-28-python入门/" class="next">NEXT</a></div><div class="copyright"><p>© 2016 - 2018 <a href="http://lshao.xyz">潜水的沙</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-65933410-1",'auto');ga('send','pageview');</script></body></html>